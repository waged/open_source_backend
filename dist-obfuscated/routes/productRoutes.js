'use strict';const a11_0x265640=a11_0x7669;function a11_0x7669(_0x5036d9,_0x12e428){const _0x46bfef=a11_0x46bf();return a11_0x7669=function(_0x7669a4,_0x1fb786){_0x7669a4=_0x7669a4-0x121;let _0x306269=_0x46bfef[_0x7669a4];return _0x306269;},a11_0x7669(_0x5036d9,_0x12e428);}(function(_0x256b03,_0x3ade19){const _0x5e889d=a11_0x7669,_0x3c2354=_0x256b03();while(!![]){try{const _0x52006e=-parseInt(_0x5e889d(0x141))/0x1*(-parseInt(_0x5e889d(0x174))/0x2)+-parseInt(_0x5e889d(0x143))/0x3+parseInt(_0x5e889d(0x184))/0x4+parseInt(_0x5e889d(0x188))/0x5*(-parseInt(_0x5e889d(0x12e))/0x6)+parseInt(_0x5e889d(0x155))/0x7*(parseInt(_0x5e889d(0x163))/0x8)+-parseInt(_0x5e889d(0x134))/0x9+-parseInt(_0x5e889d(0x16d))/0xa;if(_0x52006e===_0x3ade19)break;else _0x3c2354['push'](_0x3c2354['shift']());}catch(_0xd79fa1){_0x3c2354['push'](_0x3c2354['shift']());}}}(a11_0x46bf,0x24985));var __awaiter=this&&this[a11_0x265640(0x167)]||function(_0x1e9e99,_0x2d6e22,_0x32d8e0,_0x455c3f){function _0x9fd3c1(_0x4b199b){return _0x4b199b instanceof _0x32d8e0?_0x4b199b:new _0x32d8e0(function(_0x3c1a88){_0x3c1a88(_0x4b199b);});}return new(_0x32d8e0||(_0x32d8e0=Promise))(function(_0x3d1bbb,_0x1ebc6f){const _0x25eb00=a11_0x7669;function _0x3023a9(_0x3b62e9){try{_0x4506bd(_0x455c3f['next'](_0x3b62e9));}catch(_0xed6b46){_0x1ebc6f(_0xed6b46);}}function _0x1d12e6(_0xf0f513){const _0x2e56c0=a11_0x7669;try{_0x4506bd(_0x455c3f[_0x2e56c0(0x13d)](_0xf0f513));}catch(_0x620ec1){_0x1ebc6f(_0x620ec1);}}function _0x4506bd(_0x26bfd9){const _0x58273a=a11_0x7669;_0x26bfd9[_0x58273a(0x13e)]?_0x3d1bbb(_0x26bfd9[_0x58273a(0x132)]):_0x9fd3c1(_0x26bfd9[_0x58273a(0x132)])[_0x58273a(0x169)](_0x3023a9,_0x1d12e6);}_0x4506bd((_0x455c3f=_0x455c3f[_0x25eb00(0x154)](_0x1e9e99,_0x2d6e22||[]))[_0x25eb00(0x180)]());});},__rest=this&&this[a11_0x265640(0x17a)]||function(_0x4ded5d,_0x43f2e0){const _0x544724=a11_0x265640;var _0x5812f0={};for(var _0x449bc1 in _0x4ded5d)if(Object['prototype'][_0x544724(0x185)][_0x544724(0x15f)](_0x4ded5d,_0x449bc1)&&_0x43f2e0[_0x544724(0x12b)](_0x449bc1)<0x0)_0x5812f0[_0x449bc1]=_0x4ded5d[_0x449bc1];if(_0x4ded5d!=null&&typeof Object[_0x544724(0x159)]==='function')for(var _0x684a5=0x0,_0x449bc1=Object['getOwnPropertySymbols'](_0x4ded5d);_0x684a5<_0x449bc1[_0x544724(0x18e)];_0x684a5++){if(_0x43f2e0[_0x544724(0x12b)](_0x449bc1[_0x684a5])<0x0&&Object[_0x544724(0x146)]['propertyIsEnumerable'][_0x544724(0x15f)](_0x4ded5d,_0x449bc1[_0x684a5]))_0x5812f0[_0x449bc1[_0x684a5]]=_0x4ded5d[_0x449bc1[_0x684a5]];}return _0x5812f0;},__importDefault=this&&this['__importDefault']||function(_0x281363){const _0x75206=a11_0x265640;return _0x281363&&_0x281363[_0x75206(0x176)]?_0x281363:{'default':_0x281363};};Object['defineProperty'](exports,a11_0x265640(0x176),{'value':!![]});const express_1=__importDefault(require(a11_0x265640(0x156))),Product_1=require('../models/Product'),authorise_1=__importDefault(require(a11_0x265640(0x147))),authorise_2=__importDefault(require(a11_0x265640(0x147))),multer_1=__importDefault(require('multer')),path_1=__importDefault(require(a11_0x265640(0x122))),fs_1=__importDefault(require('fs')),error_handler_1=require(a11_0x265640(0x14c)),router=express_1['default']['Router'](),storageDir=path_1[a11_0x265640(0x14e)][a11_0x265640(0x15a)](a11_0x265640(0x18c));!fs_1[a11_0x265640(0x14e)][a11_0x265640(0x13f)](storageDir)&&fs_1['default'][a11_0x265640(0x13a)](storageDir,{'recursive':!![]});const storage=multer_1[a11_0x265640(0x14e)][a11_0x265640(0x15b)]({'destination':(_0x10c639,_0x56d05b,_0x317a1a)=>{const _0x40b482=a11_0x265640,_0x11e2b6=path_1[_0x40b482(0x14e)][_0x40b482(0x130)](__dirname,_0x40b482(0x136));fs_1[_0x40b482(0x14e)][_0x40b482(0x13a)](_0x11e2b6,{'recursive':!![]}),_0x317a1a(null,_0x11e2b6);},'filename':(_0x146ec2,_0x32c221,_0xbb46e)=>{const _0x5547cd=a11_0x265640,_0x3d6c34=Date[_0x5547cd(0x177)]()+'-'+Math[_0x5547cd(0x171)](Math[_0x5547cd(0x151)]()*0x3b9aca00),_0x5e18f2=path_1[_0x5547cd(0x14e)][_0x5547cd(0x14b)](_0x32c221[_0x5547cd(0x178)]);_0xbb46e(null,'image-'+_0x3d6c34+_0x5e18f2);}}),upload=(0x0,multer_1[a11_0x265640(0x14e)])({'storage':storage,'limits':{'fileSize':0x9*0x400*0x400}});function a11_0x46bf(){const _0x1671b0=['price','join','companyID','value','/delete/:id','1692EDZZur','imageIDs','../../../storage_regal','Get\x20Specific\x20Image\x20Error:','profitPercent','array','mkdirSync','Internal\x20server\x20error\x20:\x20','log','throw','done','existsSync','Failed\x20to\x20delete\x20the\x20file:\x20','186934YjlvLu','Product\x20not\x20found\x20or\x20unauthorized','443832ZvMvUp','Product\x20added\x20successfully','Product\x20retrieved\x20successfully','prototype','../middlewares/authorise','/:productID','/image/:productID/:filename','../../../','extname','../handlers/error_handler','includes','default','unauthorized','sendFile','random','filter','Username\x20or\x20email\x20is\x20required','apply','389473Qucwsb','express','Product\x20deleted\x20successfully','save','getOwnPropertySymbols','resolve','diskStorage','Add\x20Product\x20Error:','internalServerError','Image\x20not\x20associated\x20with\x20this\x20product','call','User\x20ID\x20or\x20email\x20is\x20required','ResponseHandler','params','40lsbiAn','findOneAndUpdate','/get/qr-auto/:autoQR','findOne','__awaiter','notFound','then','Images\x20uploaded\x20successfully','/all/:ownerID','../../..','1459270gynJkI','/image/:imageName','error','post','round','/storage_regal/','filepath:\x20','2fgioNw','Delete\x20Image\x20Error:','__esModule','now','originalname','/get/:companyID','__rest','delete','Product\x20not\x20found\x20for\x20the\x20given\x20company','protocol','push','findOneAndDelete','next','Error\x20retrieving\x20product:','No\x20images\x20uploaded','map','484304Jyfzjz','hasOwnProperty','/get/one/:productID','Get\x20Images\x20Error:','95WyaIxn','Image\x20deleted\x20successfully','Internal\x20server\x20error:\x20','files','/storage_regal','Missing\x20required\x20fields:\x20','length','success','No\x20products\x20found\x20for\x20this\x20owner','Image\x20Upload\x20Error:','body','/images/:productID','path','userID','get','images','/get/qr/:linkedQR','Product','host','put','find','indexOf','Products\x20retrieved\x20successfully','message','44922jRaDro'];a11_0x46bf=function(){return _0x1671b0;};return a11_0x46bf();}router['post']('/add',authorise_1[a11_0x265640(0x14e)],(_0x19b793,_0x395ad5)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x50a3cf=a11_0x265640;try{const _0x5d0040=_0x19b793['userID'],{companyID:_0x3f4aa5,name:_0x17f50d,commercialName:_0xbbd9e6,material:_0x520f7d,producer:_0x1a76aa,suppliers:_0x38e4d3,origin:_0x164289,category:_0x216d86,components:_0x46bc64,price:_0xfcd8e4,realPrice:_0xd4ab51,priceAdded:_0x1090e5,currency:_0x44c2d8,profitPercent:_0x203765,manufactureYear:_0x3379bd,productionYear:_0x27ca25,isUsed:isUsed=![],weight:_0x150fa7,stock:_0x1c0de6,dimensions:dimensions=[],sizes:sizes=[],purity:_0x59c312,linkedQR:_0x37450d,description:_0x55a83e,imagesID:imagesID=[],videosID:videosID=[]}=_0x19b793[_0x50a3cf(0x192)],_0x10daae=[];if(!_0x5d0040)_0x10daae[_0x50a3cf(0x17e)]('ownerID');if(!_0x3f4aa5)_0x10daae[_0x50a3cf(0x17e)](_0x50a3cf(0x131));if(!_0x17f50d)_0x10daae[_0x50a3cf(0x17e)]('name');if(!_0xfcd8e4)_0x10daae[_0x50a3cf(0x17e)](_0x50a3cf(0x12f));if(!_0x203765)_0x10daae['push'](_0x50a3cf(0x138));if(!_0x1c0de6)_0x10daae['push']('stock');if(_0x10daae[_0x50a3cf(0x18e)]>0x0){error_handler_1[_0x50a3cf(0x161)][_0x50a3cf(0x16f)](_0x395ad5,_0x50a3cf(0x18d)+_0x10daae['join'](',\x20'),0x190);return;}const _0x2f2495=yield Product_1['Product'][_0x50a3cf(0x166)]({'name':_0x17f50d,'companyID':_0x3f4aa5});if(_0x2f2495){error_handler_1[_0x50a3cf(0x161)][_0x50a3cf(0x16f)](_0x395ad5,'A\x20product\x20with\x20the\x20same\x20name\x20already\x20exists\x20in\x20this\x20company',0x190);return;}const _0x483191=new Product_1[(_0x50a3cf(0x127))]({'ownerID':_0x5d0040,'companyID':_0x3f4aa5,'name':_0x17f50d,'commercialName':_0xbbd9e6,'material':_0x520f7d,'producer':_0x1a76aa,'suppliers':_0x38e4d3,'origin':_0x164289,'category':_0x216d86,'components':_0x46bc64,'price':_0xfcd8e4,'currency':_0x44c2d8,'profitPercent':_0x203765,'realPrice':_0xd4ab51,'priceAdded':_0x1090e5,'manufactureYear':_0x3379bd,'productionYear':_0x27ca25,'isUsed':isUsed,'weight':_0x150fa7,'stock':_0x1c0de6,'dimensions':dimensions,'sizes':sizes,'purity':_0x59c312,'linkedQR':_0x37450d,'description':_0x55a83e,'imagesID':imagesID,'videosID':videosID});yield _0x483191[_0x50a3cf(0x158)](),error_handler_1[_0x50a3cf(0x161)][_0x50a3cf(0x18f)](_0x395ad5,_0x483191,_0x50a3cf(0x144));}catch(_0x5e683d){console[_0x50a3cf(0x16f)](_0x50a3cf(0x15c),_0x5e683d),error_handler_1[_0x50a3cf(0x161)][_0x50a3cf(0x15d)](_0x395ad5,_0x5e683d);}})),router[a11_0x265640(0x129)]('/edit/:id',authorise_1['default'],(_0x46d4d0,_0x2dd941)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x4e40f4=a11_0x265640;try{const {id:_0x1623a9}=_0x46d4d0[_0x4e40f4(0x162)],{userID:_0x3cda42}=_0x46d4d0,_0x1adaf4=__rest(_0x46d4d0['body'],[]),_0x1d347a=yield Product_1['Product'][_0x4e40f4(0x164)]({'_id':_0x1623a9,'ownerID':_0x3cda42},_0x1adaf4,{'new':!![],'runValidators':!![]});if(!_0x1d347a){error_handler_1[_0x4e40f4(0x161)][_0x4e40f4(0x14f)](_0x2dd941);return;}error_handler_1[_0x4e40f4(0x161)][_0x4e40f4(0x18f)](_0x2dd941,_0x1d347a);}catch(_0x14b3ba){error_handler_1[_0x4e40f4(0x161)]['internalServerError'](_0x2dd941,_0x4e40f4(0x18a)+_0x14b3ba);}})),router['delete'](a11_0x265640(0x133),authorise_1[a11_0x265640(0x14e)],(_0x58fbf6,_0x16761c)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2fb62c=a11_0x265640;try{const {id:_0x453ea8}=_0x58fbf6[_0x2fb62c(0x162)],_0x2c3da4=_0x58fbf6[_0x2fb62c(0x123)],_0x4f969f=yield Product_1['Product'][_0x2fb62c(0x17f)]({'_id':_0x453ea8,'ownerID':_0x2c3da4});if(!_0x4f969f){error_handler_1[_0x2fb62c(0x161)]['unauthorized'](_0x16761c,_0x2fb62c(0x142));return;}error_handler_1[_0x2fb62c(0x161)][_0x2fb62c(0x18f)](_0x16761c,_0x4f969f,_0x2fb62c(0x157));}catch(_0x1b8845){error_handler_1[_0x2fb62c(0x161)][_0x2fb62c(0x15d)](_0x16761c,_0x2fb62c(0x13b)+_0x1b8845);}})),router['get'](a11_0x265640(0x16b),authorise_1['default'],(_0x46186c,_0x3183f2)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x341c7d=a11_0x265640;try{const {ownerID:_0x99b8b4}=_0x46186c[_0x341c7d(0x162)],_0xbe5521=yield Product_1['Product'][_0x341c7d(0x12a)]({'ownerID':_0x99b8b4});if(!_0xbe5521[_0x341c7d(0x18e)]){error_handler_1['ResponseHandler'][_0x341c7d(0x168)](_0x3183f2,_0x341c7d(0x190));return;}error_handler_1[_0x341c7d(0x161)][_0x341c7d(0x18f)](_0x3183f2,_0xbe5521);}catch(_0x5815a6){error_handler_1[_0x341c7d(0x161)]['internalServerError'](_0x3183f2,'Internal\x20server\x20error\x20:\x20'+_0x5815a6);}})),router[a11_0x265640(0x124)](a11_0x265640(0x179),authorise_2[a11_0x265640(0x14e)],(_0x3bcfb2,_0x2f33b5)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x11c310=a11_0x265640;try{const {companyID:_0x33d7e4}=_0x3bcfb2[_0x11c310(0x162)],{userID:_0x185465,email:_0x3cfed0}=_0x3bcfb2;if(!_0x185465&&!_0x3cfed0){error_handler_1['ResponseHandler']['unauthorized'](_0x2f33b5,_0x11c310(0x153));return;}const _0x420768={'ownerID':_0x185465,'companyID':_0x33d7e4},_0x35f4d3=yield Product_1['Product'][_0x11c310(0x12a)](_0x420768);if(!_0x35f4d3||_0x35f4d3['length']===0x0){error_handler_1['ResponseHandler'][_0x11c310(0x168)](_0x2f33b5,'No\x20products\x20found\x20for\x20the\x20given\x20user');return;}error_handler_1[_0x11c310(0x161)]['success'](_0x2f33b5,_0x35f4d3,_0x11c310(0x12c));}catch(_0x47d7de){error_handler_1[_0x11c310(0x161)][_0x11c310(0x15d)](_0x2f33b5,_0x11c310(0x13b)+_0x47d7de);}})),router[a11_0x265640(0x124)](a11_0x265640(0x148),authorise_2[a11_0x265640(0x14e)],(_0xf60529,_0x3769b4)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x281f5b=a11_0x265640;try{const {productID:_0x47a8be}=_0xf60529['params'],{userID:_0x164b54}=_0xf60529;if(!_0x164b54){error_handler_1[_0x281f5b(0x161)][_0x281f5b(0x14f)](_0x3769b4,_0x281f5b(0x160));return;}const _0x3446be={'ownerID':_0x164b54,'_id':_0x47a8be},_0x179077=yield Product_1[_0x281f5b(0x127)][_0x281f5b(0x166)](_0x3446be);if(!_0x179077){error_handler_1[_0x281f5b(0x161)][_0x281f5b(0x168)](_0x3769b4,'No\x20products\x20found\x20for\x20the\x20given\x20user');return;}error_handler_1[_0x281f5b(0x161)][_0x281f5b(0x18f)](_0x3769b4,_0x179077,_0x281f5b(0x12c));}catch(_0x334d39){error_handler_1[_0x281f5b(0x161)][_0x281f5b(0x15d)](_0x3769b4,_0x281f5b(0x13b)+_0x334d39);}})),router['get'](a11_0x265640(0x186),(_0x4e8b5d,_0xb07c0d)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1b99ae=a11_0x265640;try{const {productID:_0x1017c9}=_0x4e8b5d[_0x1b99ae(0x162)],_0x270716={'_id':_0x1017c9},_0x1657cd=yield Product_1[_0x1b99ae(0x127)]['findOne'](_0x270716);if(!_0x1657cd){error_handler_1[_0x1b99ae(0x161)][_0x1b99ae(0x168)](_0xb07c0d,_0x1b99ae(0x17c));return;}error_handler_1[_0x1b99ae(0x161)][_0x1b99ae(0x18f)](_0xb07c0d,_0x1657cd,_0x1b99ae(0x145));}catch(_0x348723){console['error'](_0x1b99ae(0x181),_0x348723),error_handler_1['ResponseHandler'][_0x1b99ae(0x15d)](_0xb07c0d,'Internal\x20server\x20error\x20:\x20'+_0x348723);}})),router[a11_0x265640(0x124)](a11_0x265640(0x126),(_0x521c0e,_0x19f214)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x15e58f=a11_0x265640;try{const {linkedQR:_0x45eb00}=_0x521c0e[_0x15e58f(0x162)],_0x363e7d={'linkedQR':_0x45eb00},_0xf01c92=yield Product_1[_0x15e58f(0x127)][_0x15e58f(0x166)](_0x363e7d);if(!_0xf01c92){error_handler_1[_0x15e58f(0x161)][_0x15e58f(0x168)](_0x19f214,'Product\x20not\x20found\x20for\x20the\x20given\x20company');return;}error_handler_1[_0x15e58f(0x161)][_0x15e58f(0x18f)](_0x19f214,_0xf01c92,_0x15e58f(0x145));}catch(_0x3abec2){console['error'](_0x15e58f(0x181),_0x3abec2),error_handler_1[_0x15e58f(0x161)]['internalServerError'](_0x19f214,_0x15e58f(0x13b)+_0x3abec2);}})),router['get'](a11_0x265640(0x165),(_0x118e59,_0x52edb4)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3c4c09=a11_0x265640;try{const {autoQR:_0x6bd1b4}=_0x118e59[_0x3c4c09(0x162)],_0x331793={'autoQR':_0x6bd1b4},_0xb222fb=yield Product_1[_0x3c4c09(0x127)][_0x3c4c09(0x166)](_0x331793);if(!_0xb222fb){error_handler_1[_0x3c4c09(0x161)][_0x3c4c09(0x168)](_0x52edb4,_0x3c4c09(0x17c));return;}error_handler_1[_0x3c4c09(0x161)][_0x3c4c09(0x18f)](_0x52edb4,_0xb222fb,_0x3c4c09(0x145));}catch(_0x1065dd){console[_0x3c4c09(0x16f)](_0x3c4c09(0x181),_0x1065dd),error_handler_1[_0x3c4c09(0x161)][_0x3c4c09(0x15d)](_0x52edb4,_0x3c4c09(0x13b)+_0x1065dd);}})),router[a11_0x265640(0x170)](a11_0x265640(0x121),authorise_2[a11_0x265640(0x14e)],upload[a11_0x265640(0x139)](a11_0x265640(0x125),0x5),(_0x610563,_0x529e2a)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x52b487=a11_0x265640;try{const {productID:_0x31791a}=_0x610563[_0x52b487(0x162)],_0x5b0321=_0x610563[_0x52b487(0x123)];if(!_0x610563[_0x52b487(0x18b)]||!(_0x610563[_0x52b487(0x18b)]instanceof Array)){error_handler_1[_0x52b487(0x161)][_0x52b487(0x168)](_0x529e2a,_0x52b487(0x182));return;}const _0x35972e=yield Product_1[_0x52b487(0x127)][_0x52b487(0x166)]({'_id':_0x31791a,'ownerID':_0x5b0321});if(!_0x35972e){error_handler_1[_0x52b487(0x161)][_0x52b487(0x14f)](_0x529e2a,_0x52b487(0x142));return;}const _0xea1ad4=_0x610563['files'][_0x52b487(0x183)](_0x2aadff=>_0x2aadff['filename']);_0x35972e[_0x52b487(0x135)]=[..._0x35972e[_0x52b487(0x135)]||[],..._0xea1ad4],yield _0x35972e['save'](),error_handler_1[_0x52b487(0x161)][_0x52b487(0x18f)](_0x529e2a,_0x35972e,_0x52b487(0x16a));}catch(_0x3ea8ca){console[_0x52b487(0x16f)](_0x52b487(0x191),_0x3ea8ca),error_handler_1['ResponseHandler'][_0x52b487(0x15d)](_0x529e2a,_0x52b487(0x13b)+_0x3ea8ca);}})),router[a11_0x265640(0x17b)](a11_0x265640(0x149),authorise_2[a11_0x265640(0x14e)],(_0x4d45c4,_0x188ebe)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3c4458=a11_0x265640;try{const {productID:_0x8d2a5a,filename:_0x155c15}=_0x4d45c4['params'],_0x35de51=_0x4d45c4[_0x3c4458(0x123)],_0x40dca9=yield Product_1[_0x3c4458(0x127)][_0x3c4458(0x166)]({'_id':_0x8d2a5a,'ownerID':_0x35de51});if(!_0x40dca9){error_handler_1[_0x3c4458(0x161)][_0x3c4458(0x168)](_0x188ebe,'Product\x20not\x20found\x20or\x20unauthorized');return;}if(!_0x40dca9['imageIDs']||!_0x40dca9['imageIDs'][_0x3c4458(0x14d)](_0x155c15)){error_handler_1['ResponseHandler'][_0x3c4458(0x168)](_0x188ebe,_0x3c4458(0x15e));return;}const _0x17051c=path_1[_0x3c4458(0x14e)]['join'](__dirname,_0x3c4458(0x14a),storageDir,_0x155c15);fs_1[_0x3c4458(0x14e)]['unlink'](_0x17051c,_0x4e393f=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x46a244=_0x3c4458;if(_0x4e393f){console[_0x46a244(0x16f)]('File\x20Deletion\x20Error:',_0x4e393f),error_handler_1['ResponseHandler']['error'](_0x188ebe,_0x46a244(0x140)+_0x4e393f[_0x46a244(0x12d)],0x19a);return;}_0x40dca9[_0x46a244(0x135)]=(_0x40dca9['imageIDs']||[])[_0x46a244(0x152)](_0xfdc58f=>_0xfdc58f!==_0x155c15),yield _0x40dca9[_0x46a244(0x158)](),error_handler_1[_0x46a244(0x161)][_0x46a244(0x18f)](_0x188ebe,_0x40dca9,_0x46a244(0x189));}));}catch(_0xeaa61b){console[_0x3c4458(0x16f)](_0x3c4458(0x175),_0xeaa61b),error_handler_1['ResponseHandler']['internalServerError'](_0x188ebe,_0x3c4458(0x18a)+_0xeaa61b);}})),router['get'](a11_0x265640(0x121),(_0x4c301e,_0x136c65)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3efd45=a11_0x265640;try{const {productID:_0x392f1d}=_0x4c301e[_0x3efd45(0x162)],_0x368971=_0x4c301e,_0x5cbef3=yield Product_1['Product'][_0x3efd45(0x166)]({'_id':_0x392f1d,'ownerID':_0x368971});if(!_0x5cbef3){error_handler_1[_0x3efd45(0x161)][_0x3efd45(0x14f)](_0x136c65);return;}const _0x2210c9=_0x5cbef3['imageIDs']||[],_0x54e42a=_0x2210c9[_0x3efd45(0x183)](_0x1a4350=>{const _0x5f52b8=_0x3efd45;return _0x4c301e[_0x5f52b8(0x17d)]+'://'+_0x4c301e[_0x5f52b8(0x124)](_0x5f52b8(0x128))+_0x5f52b8(0x172)+_0x1a4350;});error_handler_1[_0x3efd45(0x161)][_0x3efd45(0x18f)](_0x136c65,_0x54e42a);}catch(_0x546c1a){console[_0x3efd45(0x16f)](_0x3efd45(0x187),_0x546c1a),error_handler_1[_0x3efd45(0x161)][_0x3efd45(0x15d)](_0x136c65,'Internal\x20server\x20error:\x20'+_0x546c1a);}})),router[a11_0x265640(0x124)](a11_0x265640(0x16e),(_0x2fb27e,_0x276c5b)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x319722=a11_0x265640;try{const {imageName:_0x2f4bda}=_0x2fb27e[_0x319722(0x162)],_0x5c4c80=path_1[_0x319722(0x14e)]['join'](__dirname,_0x319722(0x16c),storageDir,_0x2f4bda);console[_0x319722(0x13c)](_0x319722(0x173)+_0x5c4c80);if(!fs_1[_0x319722(0x14e)][_0x319722(0x13f)](_0x5c4c80)){error_handler_1['ResponseHandler'][_0x319722(0x168)](_0x276c5b,'Image\x20file\x20does\x20not\x20exist\x20on\x20the\x20server');return;}_0x276c5b[_0x319722(0x150)](_0x5c4c80);}catch(_0x300b12){console[_0x319722(0x16f)](_0x319722(0x137),_0x300b12),error_handler_1[_0x319722(0x161)]['internalServerError'](_0x276c5b,_0x319722(0x13b)+_0x300b12);}})),exports['default']=router;